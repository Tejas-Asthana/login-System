{"ast":null,"code":"import _regeneratorRuntime from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/tejas/Desktop/Web-dev-files/Projects/login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{observer}from'mobx-react';import UserStore from'./stores/UserStore';import'./App.css';import LoginIcon from\"./imgs/login-icon.png\";import LogIn from\"./components/login\";import SignUp from\"./components/signup\";import axios from'axios';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.selectSignUp=function(){_this.setState({isLogIn:false,isSignUp:true});};_this.selectLogIn=function(){_this.setState({isLogIn:true,isSignUp:false});};_this.handleChange=function(e){e.preventDefault();_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handlePost=function(e){e.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var req={email:email,password:password};axios.post('http://localhost:4000/login',req).then(function(res){var temp=res.data.message;// alert.(temp);\nconsole.log(temp);}).catch(function(err){console.log(err);});};_this.state={isLogIn:true,isSignUp:false,email:\"\",username:\"\",password:\"\"};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isloggedin',{method:'post',headers:{'Accept':'application/json','Content-Type':'Application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.username=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'Application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.username='';}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this2=this;if(UserStore.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},\"Loading... please wait\");}else{if(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},\"Welcome \",UserStore.username,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this2.doLogout();}},\"Logout Button\"));}return/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"left-side col\"},/*#__PURE__*/React.createElement(\"img\",{src:LoginIcon,alt:\"user icon\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"welcome\"},\"Adios !\")),/*#__PURE__*/React.createElement(\"div\",{className:\"right-side col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"navbar row\"},/*#__PURE__*/React.createElement(\"div\",{onClick:this.selectLogIn,className:this.state.isLogIn?\"btn-selected\":\"btn-not-selected\"},\"LOG IN\"),/*#__PURE__*/React.createElement(\"div\",{onClick:this.selectSignUp,className:this.state.isSignUp?\"btn-selected\":\"btn-not-selected\"},\"SIGN UP\")),this.state.isLogIn?/*#__PURE__*/React.createElement(LogIn,{onChange:this.handleChange,values:this.state,onPost:function onPost(e){return _this2.handlePost(e);}}):/*#__PURE__*/React.createElement(SignUp,{onChange:this.handleChange,values:this.state,onPost:function onPost(e){return _this2.handlePost(e);}})));}}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["/home/tejas/Desktop/Web-dev-files/Projects/login/src/App.js"],"names":["React","observer","UserStore","LoginIcon","LogIn","SignUp","axios","App","selectSignUp","setState","isLogIn","isSignUp","selectLogIn","handleChange","e","preventDefault","target","name","value","handlePost","state","email","password","req","post","then","res","temp","data","message","console","log","catch","err","username","fetch","method","headers","json","result","success","loading","isLoggedIn","doLogout","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {observer} from 'mobx-react';\nimport UserStore from './stores/UserStore'\nimport './App.css';\nimport LoginIcon from \"./imgs/login-icon.png\"\nimport LogIn from \"./components/login\"\nimport SignUp from \"./components/signup\"\nimport axios from 'axios';\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      isLogIn: true,\n      isSignUp: false,\n      email: \"\",\n      username: \"\",\n      password: \"\"\n    }\n  }\n\n  selectSignUp = () => {\n    this.setState({\n      isLogIn: false,\n      isSignUp: true})\n  }\n\n  selectLogIn = () => {\n    this.setState({\n      isLogIn: true,\n      isSignUp: false})\n  }\n\n  handleChange = (e) => {\n    e.preventDefault()\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  handlePost = (e) => {\n    e.preventDefault()\n    let { email, password } = this.state\n    let req = {\n      email,\n      password\n    }\n    axios.post('http://localhost:4000/login', req)\n          .then(res => {\n            const temp = res.data.message;\n            // alert.(temp);\n            console.log(temp)\n          })\n          .catch(err => {\n            console.log(err)\n          })\n  }\n\n  async  componentDidMount() {\n    try {\n      let res = await fetch('/isloggedin', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'Application/json',\n        }\n      });\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.loading = false\n        UserStore.isLoggedIn = true\n        UserStore.username = result.username\n      }\n      else {\n        UserStore.loading = false\n        UserStore.isLoggedIn = false\n      }\n    }\n    catch(e) {\n      UserStore.loading = false\n      UserStore.isLoggedIn = false\n    }\n  }\n\n  async  doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'Application/json',\n        }\n      });\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.isLoggedIn = false\n        UserStore.username = ''\n      }\n    }\n    catch(e) {\n      console.log(e)\n    }\n  }\n\n  render() {\n    if(UserStore.loading) {\n      return (\n        <div className=\"row\">\n          Loading... please wait\n        </div>\n      )\n    }\n    else {\n      if(UserStore.isLoggedIn) {\n        return (\n          <div className=\"row\">\n            Welcome {UserStore.username}\n            <button onClick={() => this.doLogout()}>Logout Button</button>\n          </div>\n        )\n      }\n\n    return (\n      <div className=\"wrapper row\">\n        <div className=\"left-side col\">\n          <img src={LoginIcon} alt=\"user icon\" />\n          <div className=\"welcome\">Adios !</div>\n        </div>\n        <div className=\"right-side col\">\n          <div className=\"navbar row\">\n            <div onClick={this.selectLogIn} className={this.state.isLogIn ? \"btn-selected\" : \"btn-not-selected\"}>\n              LOG IN\n            </div>\n            <div onClick={this.selectSignUp} className={this.state.isSignUp ? \"btn-selected\" : \"btn-not-selected\"}>\n              SIGN UP\n            </div>\n          </div>\n          {\n            this.state.isLogIn \n                              ? <LogIn onChange={this.handleChange} values={this.state}  onPost={(e) => this.handlePost(e)}/> \n                              : <SignUp onChange={this.handleChange} values={this.state} onPost={(e) => this.handlePost(e)} />\n          }\n        </div>\n      </div>\n    );\n  }\n}\n}\n\nexport default observer(App)"]},"metadata":{},"sourceType":"module"}