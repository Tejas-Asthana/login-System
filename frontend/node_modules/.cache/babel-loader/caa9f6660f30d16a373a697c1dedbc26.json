{"ast":null,"code":"import _regeneratorRuntime from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import UserStore from'../stores/UserStore';import\"./form.css\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"doLogin\",value:function(){var _doLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/login',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({email:this.props.values.email,password:this.props.values.password})});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.isLoggedIn=true;UserStore.username=result.username;}else if(result&&res.headers.success===false){this.props.values.email=\"\";this.props.values.password=\"\";alert(res.headers.msg);console.log(res);}_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);this.props.values.email=\"\";this.props.values.password=\"\";case 15:case\"end\":return _context.stop();}}},_callee,this,[[0,10]]);}));function doLogin(){return _doLogin.apply(this,arguments);}return doLogin;}()},{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"form-wrapper col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-title\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:this.props.values.isLogIn?\"block\":\"none\"}},\"LOG IN\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:this.props.values.isLogIn?\"none\":\"block\"}},\"SIGN UP\")),/*#__PURE__*/React.createElement(\"form\",{className:\"col\",action:\"/login\",method:\"POST\"},/*#__PURE__*/React.createElement(\"input\",{required:true,id:\"email\",onChange:function onChange(e){return _this.props.onChange(e);},type:\"email\",name:\"email\",value:this.props.values.email,placeholder:\"Email...\"}),/*#__PURE__*/React.createElement(\"input\",{required:true,id:\"password\",onChange:function onChange(e){return _this.props.onChange(e);},type:\"password\",name:\"password\",value:this.props.values.password,placeholder:\"Password...\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"submit\",onClick:function onClick(){return _this.doLogin();}})));}}]);return App;}(React.Component);export{App as default};","map":{"version":3,"sources":["/home/tejas/Desktop/Web-dev-files/Projects/login/frontend/src/components/login.js"],"names":["React","UserStore","App","fetch","method","headers","body","JSON","stringify","email","props","values","password","res","json","result","success","isLoggedIn","username","alert","msg","console","log","display","isLogIn","e","onChange","doLogin","Component"],"mappings":"6gCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAO,YAAP,C,GAGqBC,CAAAA,G,meAGOC,CAAAA,KAAK,CAAC,QAAD,CAAW,CAC5BC,MAAM,CAAE,MADoB,CAE5BC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFmB,CAM5BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,KAAK,CAAE,KAAKC,KAAL,CAAWC,MAAX,CAAkBF,KADR,CAEjBG,QAAQ,CAAE,KAAKF,KAAL,CAAWC,MAAX,CAAkBC,QAFX,CAAf,CANsB,CAAX,C,QAAjBC,G,qCAWeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eACJ,GAAGA,MAAM,EAAIA,MAAM,CAACC,OAApB,CAA6B,CACzBf,SAAS,CAACgB,UAAV,CAAuB,IAAvB,CACAhB,SAAS,CAACiB,QAAV,CAAqBH,MAAM,CAACG,QAA5B,CACH,CAHD,IAIK,IAAGH,MAAM,EAAIF,GAAG,CAACR,OAAJ,CAAYW,OAAZ,GAAwB,KAArC,CAA4C,CAC7C,KAAKN,KAAL,CAAWC,MAAX,CAAkBF,KAAlB,CAA0B,EAA1B,CACA,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,QAAlB,CAA6B,EAA7B,CACAO,KAAK,CAACN,GAAG,CAACR,OAAJ,CAAYe,GAAb,CAAL,CACAC,OAAO,CAACC,GAAR,CAAYT,GAAZ,EACH,C,iFAGDQ,OAAO,CAACC,GAAR,cACA,KAAKZ,KAAL,CAAWC,MAAX,CAAkBF,KAAlB,CAA0B,EAA1B,CACA,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,QAAlB,CAA6B,EAA7B,C,2LAIC,gBACL,mBACI,2BAAK,SAAS,CAAC,kBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,2BAAK,KAAK,CAAE,CAAEW,OAAO,CAAE,KAAKb,KAAL,CAAWC,MAAX,CAAkBa,OAAlB,CAA4B,OAA5B,CAAsC,MAAjD,CAAZ,WADJ,cAEI,2BAAK,KAAK,CAAE,CAAED,OAAO,CAAE,KAAKb,KAAL,CAAWC,MAAX,CAAkBa,OAAlB,CAA4B,MAA5B,CAAqC,OAAhD,CAAZ,YAFJ,CADJ,cAKI,4BAAM,SAAS,CAAC,KAAhB,CAAsB,MAAM,CAAC,QAA7B,CAAsC,MAAM,CAAC,MAA7C,eACI,6BAAO,QAAQ,KAAf,CAAgB,EAAE,CAAC,OAAnB,CAA2B,QAAQ,CAAE,kBAAAC,CAAC,QAAI,CAAA,KAAI,CAACf,KAAL,CAAWgB,QAAX,CAAoBD,CAApB,CAAJ,EAAtC,CAAkE,IAAI,CAAC,OAAvE,CAA+E,IAAI,CAAC,OAApF,CAA4F,KAAK,CAAE,KAAKf,KAAL,CAAWC,MAAX,CAAkBF,KAArH,CAA4H,WAAW,CAAC,UAAxI,EADJ,cAEI,6BAAO,QAAQ,KAAf,CAAgB,EAAE,CAAC,UAAnB,CAA8B,QAAQ,CAAE,kBAAAgB,CAAC,QAAI,CAAA,KAAI,CAACf,KAAL,CAAWgB,QAAX,CAAoBD,CAApB,CAAJ,EAAzC,CAAqE,IAAI,CAAC,UAA1E,CAAqF,IAAI,CAAC,UAA1F,CAAqG,KAAK,CAAE,KAAKf,KAAL,CAAWC,MAAX,CAAkBC,QAA9H,CAAwI,WAAW,CAAC,aAApJ,EAFJ,cAGI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAE,yBAAM,CAAA,KAAI,CAACe,OAAL,EAAN,EAA7C,EAHJ,CALJ,CADJ,CAaH,C,iBA/C4B3B,KAAK,CAAC4B,S,SAAlB1B,G","sourcesContent":["import React from 'react'\nimport UserStore from '../stores/UserStore'\nimport \"./form.css\"\n\n\nexport default class App extends React.Component {\n    async doLogin() {\n        try {\n            let res = await fetch('/login', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email: this.props.values.email,\n                    password: this.props.values.password\n                })\n            })\n            let result = await res.json()\n            if(result && result.success) {\n                UserStore.isLoggedIn = true\n                UserStore.username = result.username\n            }\n            else if(result && res.headers.success === false) {\n                this.props.values.email = \"\"\n                this.props.values.password = \"\"\n                alert(res.headers.msg)\n                console.log(res)\n            }\n        }\n        catch(e) {\n            console.log(e)\n            this.props.values.email = \"\"\n            this.props.values.password = \"\"\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"form-wrapper col\">\n                <div className=\"form-title\">\n                    <div style={{ display: this.props.values.isLogIn ? \"block\" : \"none\" }}>LOG IN</div>\n                    <div style={{ display: this.props.values.isLogIn ? \"none\" : \"block\" }}>SIGN UP</div>\n                </div>\n                <form className=\"col\" action=\"/login\" method=\"POST\">\n                    <input required id=\"email\" onChange={e => this.props.onChange(e)} type=\"email\" name=\"email\" value={this.props.values.email} placeholder=\"Email...\" />\n                    <input required id=\"password\" onChange={e => this.props.onChange(e)} type=\"password\" name=\"password\" value={this.props.values.password} placeholder=\"Password...\" />\n                    <input type=\"submit\" value=\"submit\" onClick={() => this.doLogin()}/>\n                </form>\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}